{% extends 'base_back.html.twig' %}

{% block body %}
<div class="container-fluid">
    <div class="d-flex">
        <div class="col-md-10 p-0 m-1" id="div1">
            <div id="calendar-holder"></div>
        </div>
        <div class="col-md-2 p-5 m-0" id="div2">
            <a href="{{ path('app_booking_new') }}" class="btn btn-primary">Nouvelle Mission</a>
        </div>
    </div>
</div>

    
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css">
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css' >
{% endblock %}

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales-all.min.js"></script>

    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', () => {
            var calendarEl = document.getElementById('calendar-holder');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                locale: 'fr-FR',
                themeSystem: 'bootstrap5',
                timeZone: 'Europe/Paris',
                displayEventTime: false,
                editable: true,
                {# eventResizableFromStart: true #}
                eventDisplay: 'block',
                eventSources: [
                    {
                        url: "{{ path('fc_load_events') }}",
                        method: "POST",
                        extraParams: {
                            filters: JSON.stringify({})
                        },
                        failure: () => {
                            alert("There was an error while fetching FullCalendar!");
                        },
                    },
                ],
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay',
                },
            });
            calendar.render();
        });
    </script>
{% endblock %}