{% extends 'base_back.html.twig' %}

{% block title %}New Booking{% endblock %}

{% block body %}
<div style="background-color: #D1D1D1; min-height:100vh">
    <div class="container" style="max-width:30vw">
        <div class="d-flex justify-content-center pt-4 mb-4">
            <h1>Nouvelle Mission</h1>
        </div>
        <div class="d-flex justify-content-start pb-3">
            <a class="btn btn-primary" href="{{ path('app_booking_index') }}">Retour Ã  la liste</a>
        </div>
        {{ include('booking/_form.html.twig') }}
    </div>
</div>
{% endblock %}
{% block javascripts %}
{{ parent() }}
<script>
        $(document).ready(function() {
            $("#booking_centre").change(function(){
                let id_centre = $(this).val();

                $.ajax({
                    url: "/admin/dashboard/" + id_centre,
                    type: "GET",
                    data: {id: id_centre},
                    success: function(promos){
                        console.log(promos);
                        $("#booking_promo").html('');

                        for(promo in promos){
                            $("#booking_promo").
                            append("<option value="+ promos[promo].id +">"+ promos[promo].nom +"</option>");
                        }

                    }
                });
            })


        /*     var $centre = $('#booking_centre');
            // When centre gets selected ...
            $centre.change(function() {
            // ... retrieve the corresponding form.
            var $form = $(this).closest('form');
            // Simulate form data, but only include the selected centre value.
            var data = {};
            data[$centre.attr('name')] = $centre.val();
            // Submit data via AJAX to the form's action path.
                    $.ajax({
                        url : $form.attr('action'),
                        type: $form.attr('method'),
                        data : data,
                        complete: function(html) {
                        // Replace current position field ...
                        $('#booking_promo').replaceWith(
                            // ... with the returned one from the AJAX response.
                            $(html.responseText).find('#booking_promo')
                        );
                        // Position field now displays the appropriate positions.
                        }
                    });
            });*/
        }) 
        </script>
{% endblock %}
